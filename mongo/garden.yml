kind: Module
description: mongodb persistent volume
type: persistentvolumeclaim
name: {{project-name}}-db-storage
spec:
  accessModes: ${var.volumeAccessModes}
  storageClassName: standard
  resources:
    requests:
      storage: 1Gi
---
kind: Module
description: mongodb server
type: container
name: {{project-name}}-db
image: mongo:4.0
services:
  - name: {{project-name}}-db
    replicas: 1
    volumes:
      - name: {{project-name}}-db-storage
        module: {{project-name}}-db-storage
        containerPath: /data/db
    ports:
      - name: mongo
        protocol: TCP
        containerPort: 27017